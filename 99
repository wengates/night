local WindUI

do
    local ok, result = pcall(function()
        return require("./src/Init")
    end)
    
    if ok then
        WindUI = result
    else 
        WindUI = loadstring(game:HttpGet("https://raw.githubusercontent.com/Footagesus/WindUI/refs/heads/main/dist/main.lua"))()
    end
end

-- 
local Players = game:GetService("Players")
local Replicated = game:GetService("ReplicatedStorage")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Workspace = game:GetService("Workspace")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local TextChatService = game:GetService("TextChatService")
local Lighting = game:GetService("Lighting")
local VirtualInputManager = game:GetService("VirtualInputManager")
local VirtualUser = game:GetService("VirtualUser")

-- 
local discordLabel = Drawing.new("Text")
discordLabel.Text = "discord.gg/snare"
discordLabel.Color = Color3.fromRGB(0, 0, 255)
discordLabel.Size = 18
discordLabel.Outline = true
discordLabel.OutlineColor = Color3.fromRGB(255, 255, 255)
discordLabel.Center = true
discordLabel.Position = Vector2.new(Workspace.CurrentCamera.ViewportSize.X / 2, 20)
discordLabel.Visible = true
discordLabel.ZIndex = 999

Workspace.CurrentCamera:GetPropertyChangedSignal("ViewportSize"):Connect(function()
    discordLabel.Position = Vector2.new(Workspace.CurrentCamera.ViewportSize.X / 2, 20)
end)

local AboutTab = Window:Tab({
    Title = "Home",
    Icon = "info",
})

AboutTab:Section({
    Title = "Join Our Discord Server",
    TextSize = 22,
    FontWeight = Enum.FontWeight.Bold,
    TextColor = Color3.fromRGB(88, 101, 242)
})

local DiscordServerParagraph = AboutTab:Paragraph({
    Title = "Project Snare",
    Desc = "Join our official Discord server for updates, support, and exclusive features, community.",
    Image = "https://i.imgur.com/LfCps6t.png",
    Thumbnail = "https://i.imgur.com/T1emdRA.png",
    ImageSize = 52,
    ThumbnailSize = 120,
    Buttons = {
        {
            Title = "Copy Discord Link",
            Icon = "link",
            Color = Color3.fromRGB(88, 101, 242),
            Callback = function()
                pcall(function()
                    if setclipboard then
                        setclipboard("https://discord.gg/snare")
                    elseif writeclipboard then
                        writeclipboard("https://discord.gg/snare")
                    end
                end)
                showNotification("Discord Link Copied", "Join our server at: discord.gg/snare", "check")
            end
        }
    }
})

AboutTab:Section({
    Title = "Credits",
})

AboutTab:Paragraph({
    Title = "kzen",
    Desc = "script developer",
})

AboutTab:Paragraph({
    Title = "SnareTeam",
    Desc = "Kzen , nic , tiecti",
})

-- 
local LocalPlayer = Players.LocalPlayer
local camera = workspace.CurrentCamera

-- 
local teleportTargets = {
    "Alien", "Alien Chest", "Alien Shelf", "Alpha Wolf", "Alpha Wolf Pelt", "Anvil Base", "Apple", "Bandage", "Bear", "Berry",
    "Bolt", "Broken Fan", "Broken Microwave", "Bunny", "Bunny Foot", "Cake", "Carrot", "Chair Set", "Chest", "Chilli",
    "Coal", "Coin Stack", "Crossbow Cultist", "Cultist", "Cultist Gem", "Deer", "Fuel Canister", "Giant Sack", "Good Axe", "Iron Body",
    "Item Chest", "Item Chest2", "Item Chest3", "Item Chest4", "Item Chest6", "Laser Fence Blueprint", "Laser Sword", "Leather Body", "Log", "Lost Child",
    "Lost Child2", "Lost Child3", "Lost Child4", "Medkit", "Meat? Sandwich", "Morsel", "Old Car Engine", "Old Flashlight", "Old Radio", "Oil Barrel",
    "Raygun", "Revolver", "Revolver Ammo", "Rifle", "Rifle Ammo", "Riot Shield", "Sapling", "Seed Box", "Sheet Metal", "Spear",
    "Steak", "Stronghold Diamond Chest", "Tyre", "UFO Component", "UFO Junk", "Washing Machine", "Wolf", "Wolf Corpse", "Wolf Pelt"
}
local AimbotTargets = {"Alien", "Alpha Wolf", "Wolf", "Crossbow Cultist", "Cultist", "Bunny", "Bear", "Polar Bear"}

-- 
local espEnabled = false
local npcESPEnabled = false
local AutoTreeFarmEnabled = false
local AimbotEnabled = false
local flying = false
local killAuraToggle = false
local godmodeEnabled = false
local dayFarmEnabled = false
local autoCampfireFuel = false


local ignoreDistanceFrom = Vector3.new(0, 0, 0)
local minDistance = 50
local radius = 200
local FOVRadius = 100
local speed = 60

local 99-log
local 99-logSuccess, 99-logErr = pcall(function()
    99-log = loadstring(game:HttpGet("http://raw.githubusercontent.com/wengates/99-log/refs/heads/main/99log"))()
end)

if not 99-logSuccess then
    warn("Failed to load 99-log: " .. tostring(99-logErr))
end

local Window = WindUI:CreateWindow({
    Title = "Snare99Nights",
    Author = "by ProjectSnare",
    Folder = "Snare99Nights",
    Icon = "https://i.imgur.com/z6i9m4J.png",
    NewElements = true,
    
    HideSearchBar = false,
    
    OpenButton = {
        Title = "Open Snare99Nights",
        CornerRadius = UDim.new(1,0),
        StrokeThickness = 3,
        Enabled = true,
        Draggable = true,
        OnlyMobile = false,
        
        Color = ColorSequence.new(
            Color3.fromHex("#FF6B35"), 
            Color3.fromHex("#FFE66D")
        )
    }
})

do    
    Window:Tag({
        Title = "99 Nights",
        Icon = "moon",
        Color = Color3.fromHex("#FF6B35")
    })
    
    Window:Tag({
        Title = "discord.gg/snare",
        Icon = "message-circle",
        Color = Color3.fromHex("#5865F2")
    })
end

-- 
local function showNotification(title, content, icon)
    WindUI:Notify({
        Title = title or "Notification",
        Content = content or "",
        Icon = icon or "info"
    })
end

-- 
local safezoneBaseplates = {}
local function createSafeZone()
    local baseplateSize = Vector3.new(2048, 1, 2048)
    local baseY = 100
    local centerPos = Vector3.new(0, baseY, 0)

    for dx = -1, 1 do
        for dz = -1, 1 do
            local pos = centerPos + Vector3.new(dx * baseplateSize.X, 0, dz * baseplateSize.Z)
            local baseplate = Instance.new("Part")
            baseplate.Name = "SafeZoneBaseplate"
            baseplate.Size = baseplateSize
            baseplate.Position = pos
            baseplate.Anchored = true
            baseplate.CanCollide = true
            baseplate.Transparency = 1
            baseplate.Color = Color3.fromRGB(255, 255, 255)
            baseplate.Parent = workspace
            table.insert(safezoneBaseplates, baseplate)
        end
    end
end

createSafeZone()

-- 
local toolsDamageIDs = {
    ["Old Axe"] = "1_8982038982",
    ["Good Axe"] = "112_8982038982",
    ["Strong Axe"] = "116_8982038982",
    ["Chainsaw"] = "647_8992824875",
    ["Spear"] = "196_8999010016"
}

-- 
local dayFarmPlatform
local function createDayFarmPlatform()
    if dayFarmPlatform then
        dayFarmPlatform:Destroy()
    end
    
    dayFarmPlatform = Instance.new("Part")
    dayFarmPlatform.Name = "DayFarmPlatform"
    dayFarmPlatform.Size = Vector3.new(100, 5, 100)
    dayFarmPlatform.Position = Vector3.new(0, 500, 0)
    dayFarmPlatform.Anchored = true
    dayFarmPlatform.CanCollide = true
    dayFarmPlatform.Material = Enum.Material.Neon
    dayFarmPlatform.Color = Color3.fromRGB(0, 255, 255)
    dayFarmPlatform.Parent = workspace
    
    return dayFarmPlatform
end

local function toggleDayFarm(state)
    dayFarmEnabled = state
    if state then
        -- 
        local platform = createDayFarmPlatform()
        if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
            LocalPlayer.Character:PivotTo(platform.CFrame + Vector3.new(0, 10, 0))
        end
        
        -- 
        godmodeEnabled = true
        showNotification("Day Farm", "Platform created and Godmode activated", "shield")
    else
        -- 
        if dayFarmPlatform then
            dayFarmPlatform:Destroy()
            dayFarmPlatform = nil
        end
        showNotification("Day Farm", "Platform removed", "shield-off")
    end
end

--  
local campfireFuelItems = {"Log", "Coal", "Fuel Canister", "Oil Barrel", "Biofuel"}

local function moveItemToPlayer(item)
    if not item or not item:IsDescendantOf(workspace) then return end
    
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local part = item.PrimaryPart or item:FindFirstChildWhichIsA("BasePart") or item:FindFirstChild("Handle")
    if not part then return end

    pcall(function()
        Replicated.RemoteEvents.RequestStartDraggingItem:FireServer(item)
        task.wait(0.05)
        
        if item.PrimaryPart then
            item:SetPrimaryPartCFrame(hrp.CFrame + Vector3.new(0, 3, 0))
        else
            part.CFrame = hrp.CFrame + Vector3.new(0, 3, 0)
        end
        
        task.wait(0.05)
        Replicated.RemoteEvents.StopDraggingItem:FireServer(item)
    end)
end

-- 
task.spawn(function()
    while true do
        if autoCampfireFuel then
            for _, itemName in ipairs(campfireFuelItems) do
                for _, item in ipairs(workspace.Items:GetChildren()) do
                    if item.Name == itemName then
                        moveItemToPlayer(item)
                        task.wait(0.2) 
                    end
                end
            end
        end
        task.wait(2) 
    end
end)

--  
local function bringAllItemsToPlayer()
    local itemsFolder = workspace:FindFirstChild("Items")
    if not itemsFolder then
        showNotification("Error", "Items folder not found", "x")
        return
    end
    
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then
        showNotification("Error", "Character not found", "x")
        return
    end
    
    local itemCount = 0
    
    for _, item in ipairs(itemsFolder:GetChildren()) do
        moveItemToPlayer(item)
        itemCount = itemCount + 1
        task.wait(0.1) 
    end
    
    showNotification("Items Brought", "Brought " .. itemCount .. " items to your position", "package")
end


local itemCategories = {
    weapons = {"Laser Sword", "Raygun", "Spear", "Rifle", "Revolver"},
    materials = {"Log", "Coal", "Fuel Canister", "Sheet Metal", "Bolt"},
    food = {"Apple", "Berry", "Carrot", "Steak", "Morsel"},
    special = {"Alien Chest", "Stronghold Diamond Chest", "Cultist Gem", "UFO Component"}
}

local function bringSpecificItems(itemList)
    local itemsFolder = workspace:FindFirstChild("Items")
    if not itemsFolder then return end
    
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end
    
    local itemCount = 0
    
    for _, itemName in ipairs(itemList) do
        for _, item in ipairs(itemsFolder:GetChildren()) do
            if item.Name == itemName then
                moveItemToPlayer(item)
                itemCount = itemCount + 1
                task.wait(0.1)
            end
        end
    end
    
    showNotification("Items Brought", "Brought " .. itemCount .. " specific items", "package")
end


function mouse1click()
    VirtualInputManager:SendMouseButtonEvent(0, 0, 0, true, game, 0)
    VirtualInputManager:SendMouseButtonEvent(0, 0, 0, false, game, 0)
end


local FOVCircle = Drawing.new("Circle")
FOVCircle.Color = Color3.fromRGB(128, 255, 0)
FOVCircle.Thickness = 1
FOVCircle.Radius = FOVRadius
FOVCircle.Transparency = 0.5
FOVCircle.Filled = false
FOVCircle.Visible = false

local function createESP(item)
    local adorneePart
    if item:IsA("Model") then
        if item:FindFirstChildWhichIsA("Humanoid") then return end
        adorneePart = item:FindFirstChildWhichIsA("BasePart")
    elseif item:IsA("BasePart") then
        adorneePart = item
    else
        return
    end

    if not adorneePart then return end

    local distance = (adorneePart.Position - ignoreDistanceFrom).Magnitude
    if distance < minDistance then return end

    if not item:FindFirstChild("ESP_Billboard") then
        local billboard = Instance.new("BillboardGui")
        billboard.Name = "ESP_Billboard"
        billboard.Adornee = adorneePart
        billboard.Size = UDim2.new(0, 50, 0, 20)
        billboard.AlwaysOnTop = true
        billboard.StudsOffset = Vector3.new(0, 2, 0)

        local label = Instance.new("TextLabel", billboard)
        label.Size = UDim2.new(1, 0, 1, 0)
        label.Text = item.Name
        label.BackgroundTransparency = 1
        label.TextColor3 = Color3.fromRGB(255, 255, 255)
        label.TextStrokeTransparency = 0
        label.TextScaled = true
        billboard.Parent = item
    end

    if not item:FindFirstChild("ESP_Highlight") then
        local highlight = Instance.new("Highlight")
        highlight.Name = "ESP_Highlight"
        highlight.FillColor = Color3.fromRGB(255, 85, 0)
        highlight.OutlineColor = Color3.fromRGB(0, 100, 0)
        highlight.FillTransparency = 0.25
        highlight.OutlineTransparency = 0
        highlight.Adornee = item:IsA("Model") and item or adorneePart
        highlight.DepthMode = Enum.HighlightDepthMode.AlwaysOnTop
        highlight.Parent = item
    end
end

local function toggleESP(state)
    espEnabled = state
    for _, item in pairs(workspace:GetDescendants()) do
        if table.find(teleportTargets, item.Name) then
            if espEnabled then
                createESP(item)
            else
                if item:FindFirstChild("ESP_Billboard") then item.ESP_Billboard:Destroy() end
                if item:FindFirstChild("ESP_Highlight") then item.ESP_Highlight:Destroy() end
            end
        end
    end
end


local npcBoxes = {}

local function createNPCESP(npc)
    if not npc:IsA("Model") or npc:FindFirstChild("HumanoidRootPart") == nil then return end

    local root = npc:FindFirstChild("HumanoidRootPart")
    if npcBoxes[npc] then return end

    local box = Drawing.new("Square")
    box.Thickness = 2
    box.Transparency = 1
    box.Color = Color3.fromRGB(0, 255, 200)
    box.Filled = false
    box.Visible = true

    local nameText = Drawing.new("Text")
    nameText.Text = npc.Name
    nameText.Color = Color3.fromRGB(255, 255, 255)
    nameText.Size = 16
    nameText.Center = true
    nameText.Outline = true
    nameText.Visible = true

    npcBoxes[npc] = {box = box, name = nameText}

    npc.AncestryChanged:Connect(function(_, parent)
        if not parent and npcBoxes[npc] then
            npcBoxes[npc].box:Remove()
            npcBoxes[npc].name:Remove()
            npcBoxes[npc] = nil
        end
    end)
end

local function toggleNPCESP(state)
    npcESPEnabled = state
    if not state then
        for npc, visuals in pairs(npcBoxes) do
            if visuals.box then visuals.box:Remove() end
            if visuals.name then visuals.name:Remove() end
        end
        npcBoxes = {}
    else
        for _, obj in ipairs(workspace:GetDescendants()) do
            if table.find(AimbotTargets, obj.Name) and obj:IsA("Model") then
                createNPCESP(obj)
            end
        end
    end
end

local badTrees = {}
task.spawn(function()
    while true do
        if AutoTreeFarmEnabled then
            local trees = {}
            for _, obj in pairs(workspace:GetDescendants()) do
                if obj.Name == "Trunk" and obj.Parent and obj.Parent.Name == "Small Tree" then
                    local distance = (obj.Position - ignoreDistanceFrom).Magnitude
                    if distance > minDistance and not badTrees[obj:GetFullName()] then
                        table.insert(trees, obj)
                    end
                end
            end

            table.sort(trees, function(a, b)
                return (a.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude <
                       (b.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
            end)

            for _, trunk in ipairs(trees) do
                if not AutoTreeFarmEnabled then break end
                LocalPlayer.Character:PivotTo(trunk.CFrame + Vector3.new(0, 3, 0))
                task.wait(0.2)
                local startTime = tick()
                while AutoTreeFarmEnabled and trunk and trunk.Parent and trunk.Parent.Name == "Small Tree" do
                    mouse1click()
                    task.wait(0.2)
                    if tick() - startTime > 12 then
                        badTrees[trunk:GetFullName()] = true
                        break
                    end
                end
                task.wait(0.3)
            end
        end
        task.wait(1.5)
    end
end)

local lastAimbotCheck = 0
local aimbotCheckInterval = 0.02
local smoothness = 0.2

RunService.RenderStepped:Connect(function()
    if AimbotEnabled then
        local mousePos = UserInputService:GetMouseLocation()
        FOVCircle.Position = Vector2.new(mousePos.X, mousePos.Y)
        FOVCircle.Visible = true
    else
        FOVCircle.Visible = false
    end

    if not AimbotEnabled or not UserInputService:IsMouseButtonPressed(Enum.UserInputType.MouseButton2) then
        return
    end

    local currentTime = tick()
    if currentTime - lastAimbotCheck < aimbotCheckInterval then return end
    lastAimbotCheck = currentTime

    local mousePos = UserInputService:GetMouseLocation()
    local closestTarget, shortestDistance = nil, math.huge

    for _, obj in ipairs(workspace:GetDescendants()) do
        if table.find(AimbotTargets, obj.Name) and obj:IsA("Model") then
            local head = obj:FindFirstChild("Head")
            if head then
                local screenPos, onScreen = camera:WorldToViewportPoint(head.Position)
                if onScreen then
                    local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude
                    if dist < shortestDistance and dist <= FOVRadius then
                        shortestDistance = dist
                        closestTarget = head
                    end
                end
            end
        end
    end

    if closestTarget then
        local currentCF = camera.CFrame
        local targetCF = CFrame.new(camera.CFrame.Position, closestTarget.Position)
        camera.CFrame = currentCF:Lerp(targetCF, smoothness)
    end
end)

local flyConnection = nil

local function startFlying()
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if not hrp then return end

    local bodyGyro = Instance.new("BodyGyro", hrp)
    local bodyVelocity = Instance.new("BodyVelocity", hrp)
    bodyGyro.P = 9e4
    bodyGyro.MaxTorque = Vector3.new(9e9, 9e9, 9e9)
    bodyGyro.CFrame = hrp.CFrame
    bodyVelocity.MaxForce = Vector3.new(9e9, 9e9, 9e9)

    flyConnection = RunService.RenderStepped:Connect(function()
        local moveVec = Vector3.zero
        local camCF = camera.CFrame
        if UserInputService:IsKeyDown(Enum.KeyCode.W) then moveVec += camCF.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.S) then moveVec -= camCF.LookVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.A) then moveVec -= camCF.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.D) then moveVec += camCF.RightVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.Space) then moveVec += camCF.UpVector end
        if UserInputService:IsKeyDown(Enum.KeyCode.LeftShift) then moveVec -= camCF.UpVector end
        bodyVelocity.Velocity = moveVec.Magnitude > 0 and moveVec.Unit * speed or Vector3.zero
        bodyGyro.CFrame = camCF
    end)
end

local function stopFlying()
    if flyConnection then flyConnection:Disconnect() end
    local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
    if hrp then
        for _, v in pairs(hrp:GetChildren()) do
            if v:IsA("BodyGyro") or v:IsA("BodyVelocity") then v:Destroy() end
        end
    end
end

local function toggleFly(state)
    flying = state
    if flying then startFlying() else stopFlying() end
end

RunService.RenderStepped:Connect(function()
    for npc, visuals in pairs(npcBoxes) do
        local box = visuals.box
        local name = visuals.name

        if npc and npc:FindFirstChild("HumanoidRootPart") then
            local hrp = npc.HumanoidRootPart
            local size = Vector2.new(60, 80)
            local screenPos, onScreen = camera:WorldToViewportPoint(hrp.Position)

            if onScreen then
                box.Position = Vector2.new(screenPos.X - size.X / 2, screenPos.Y - size.Y / 2)
                box.Size = size
                box.Visible = true

                name.Position = Vector2.new(screenPos.X, screenPos.Y - size.Y / 2 - 15)
                name.Visible = true
            else
                box.Visible = false
                name.Visible = false
            end
        else
            box:Remove()
            name:Remove()
            npcBoxes[npc] = nil
        end
    end
end)

local function god()
    local events = Replicated:FindFirstChild("RemoteEvents")
    if not events then return end

    local dmg = events:FindFirstChild("DamagePlayer")
    if not dmg then return end

    local ok = pcall(function()
        dmg:FireServer(-9e9)
    end)

    if not ok then
        warn("Godmode failed to fire")
    end
end

task.spawn(function()
    while task.wait(0.5) do
        if godmodeEnabled then
            god()
        end
    end
end)

local function getAnyToolWithDamageID()
    for toolName, damageID in pairs(toolsDamageIDs) do
        local tool = LocalPlayer.Inventory:FindFirstChild(toolName)
        if tool then
            return tool, damageID
        end
    end
    return nil, nil
end

local function killAuraLoop()
    while killAuraToggle do
        local character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
        local hrp = character:FindFirstChild("HumanoidRootPart")
        if hrp then
            local tool, damageID = getAnyToolWithDamageID()
            if tool and damageID then
                for _, mob in ipairs(Workspace.Characters:GetChildren()) do
                    if mob:IsA("Model") then
                        local part = mob:FindFirstChildWhichIsA("BasePart")
                        if part and (part.Position - hrp.Position).Magnitude <= radius then
                            pcall(function()
                                Replicated.RemoteEvents.ToolDamageObject:InvokeServer(
                                    mob,
                                    tool,
                                    damageID,
                                    CFrame.new(part.Position)
                                )
                            end)
                        end
                    end
                end
                task.wait(0.1)
            else
                task.wait(1)
            end
        else
            task.wait(0.5)
        end
    end
end

do
    local AboutTab = Window:Tab({
        Title = "Home",
        Icon = "info",
    })

    AboutTab:Section({
        Title = "Join Our Discord Server",
        TextSize = 22,
        FontWeight = Enum.FontWeight.Bold,
        TextColor = Color3.fromRGB(88, 101, 242)
    })

    local DiscordServerParagraph = AboutTab:Paragraph({
        Title = "Project Snare",
        Desc = "Join our official Discord server for updates, support, and exclusive features, community.",
        Image = "https://i.imgur.com/LfCps6t.png",
        Thumbnail = "https://i.imgur.com/T1emdRA.png",
        ImageSize = 52,
        ThumbnailSize = 120,
        Buttons = {
            {
                Title = "Copy Discord Link",
                Icon = "link",
                Color = Color3.fromRGB(88, 101, 242),
                Callback = function()
                    pcall(function()
                        if setclipboard then
                            setclipboard("https://discord.gg/snare")
                        elseif writeclipboard then
                            writeclipboard("https://discord.gg/snare")
                        end
                    end)
                    showNotification("Discord Link Copied", "Join our server at: discord.gg/snare", "check")
                end
            }
        }
    })

    AboutTab:Section({
        Title = "Credits",
    })

    AboutTab:Paragraph({
        Title = "tiecti & Kzen",
        Desc = "Script Developers",
    })

    AboutTab:Paragraph({
        Title = "SnareTeam",
        Desc = "Kzen , nic , tiecti",
    })
end

do
    local MainTab = Window:Tab({
        Title = "Main",
        Icon = "star",
    })
    
    local VisualSection = MainTab:Section({
        Title = "Visual Features",
    })
    
    VisualSection:Toggle({
        Title = "Item ESP",
        Desc = "Show ESP for all collectible items",
        Flag = "ItemESP",
        Callback = function(state)
            toggleESP(state)
            showNotification("Item ESP", state and "Enabled" or "Disabled", state and "eye" or "eye-off")
        end
    })
    
    VisualSection:Toggle({
        Title = "NPC ESP",
        Desc = "Show ESP for NPCs and enemies",
        Flag = "NPCESP",
        Callback = function(state)
            toggleNPCESP(state)
            showNotification("NPC ESP", state and "Enabled" or "Disabled", state and "eye" or "eye-off")
        end
    })
    
    VisualSection:Toggle({
        Title = "Show Safe Zone",
        Desc = "Toggle safe zone baseplates visibility",
        Flag = "SafeZone",
        Callback = function(state)
            for _, baseplate in ipairs(safezoneBaseplates) do
                baseplate.Transparency = state and 0.8 or 1
                baseplate.CanCollide = state
            end
            showNotification("Safe Zone", state and "Visible" or "Hidden", state and "shield" or "shield-off")
        end
    })
    
    local AutomationSection = MainTab:Section({
        Title = "Automation",
    })
    
    AutomationSection:Toggle({
        Title = "Auto Tree Farm",
        Desc = "Automatically farm small trees",
        Flag = "AutoTreeFarm",
        Callback = function(state)
            AutoTreeFarmEnabled = state
            showNotification("Auto Tree Farm", state and "Enabled" or "Disabled", state and "tree" or "tree-off")
        end
    })
    
    AutomationSection:Toggle({
        Title = "Aimbot",
        Desc = "Hold Right Click to aim at enemies",
        Flag = "Aimbot",
        Callback = function(state)
            AimbotEnabled = state
            showNotification("Aimbot", state and "Enabled - Hold Right Click" or "Disabled", state and "crosshair" or "crosshair-off")
        end
    })
    
    AutomationSection:Toggle({
        Title = "Kill Aura",
        Desc = "Automatically attack nearby enemies",
        Flag = "KillAura",
        Callback = function(state)
            killAuraToggle = state
            if state then
                task.spawn(killAuraLoop)
            end
            showNotification("Kill Aura", state and "Enabled" or "Disabled", state and "swords" or "swords-off")
        end
    })
    
    AutomationSection:Slider({
        Title = "Kill Aura Radius",
        Desc = "Set the kill aura radius",
        Flag = "KillAuraRadius",
        Value = {
            Min = 20,
            Max = 500,
            Default = 200,
        },
        Callback = function(value)
            radius = math.clamp(value, 20, 500)
            showNotification("Kill Aura", "Radius set to: " .. radius, "ruler")
        end
    })
    
    AutomationSection:Toggle({
        Title = "Fly",
        Desc = "WASD + Space + Shift to fly",
        Flag = "Fly",
        Callback = function(state)
            toggleFly(state)
            showNotification("Fly", state and "Enabled" or "Disabled", state and "feather" or "feather-off")
        end
    })
    
    AutomationSection:Toggle({
        Title = "Godmode",
        Desc = "Become invincible to damage",
        Flag = "Godmode",
        Callback = function(state)
            godmodeEnabled = state
            showNotification("Godmode", state and "Enabled" or "Disabled", state and "shield" or "shield-off")
        end
    })
    
    local TeleportSection = MainTab:Section({
        Title = "Teleports",
    })
    
    TeleportSection:Button({
        Title = "Teleport to Campfire",
        Desc = "Teleport to the main campfire",
        Icon = "campfire",
        Callback = function()
            LocalPlayer.Character:PivotTo(CFrame.new(0, 10, 0))
            showNotification("Teleported", "Moved to campfire", "map-pin")
        end
    })
    
    TeleportSection:Button({
        Title = "Teleport to Grinder",
        Desc = "Teleport to the grinder location",
        Icon = "settings",
        Callback = function()
            LocalPlayer.Character:PivotTo(CFrame.new(16.1, 4, -4.6))
            showNotification("Teleported", "Moved to grinder", "map-pin")
        end
    })
end

do
    local AutoFarmTab = Window:Tab({
        Title = "Auto Farm",
        Icon = "settings",
    })
    
    local CampfireSection = AutoFarmTab:Section({
        Title = "Campfire Fuel",
    })
    
    CampfireSection:Toggle({
        Title = "Auto Campfire Fuel",
        Desc = "Automatically bring campfire fuel to you",
        Flag = "AutoCampfireFuel",
        Callback = function(state)
            autoCampfireFuel = state
            showNotification("Auto Campfire Fuel", state and "Enabled" or "Disabled", "fire")
        end
    })
    
    CampfireSection:Button({
        Title = "Bring ALL Items to Me",
        Desc = "Bring all items from the map to your position",
        Icon = "package",
        Callback = function()
            bringAllItemsToPlayer()
        end
    })
    
    local ItemsSection = AutoFarmTab:Section({
        Title = "Bring Specific Items",
    })
    
    for categoryName, items in pairs(itemCategories) do
        ItemsSection:Button({
            Title = "Bring " .. categoryName,
            Desc = "Bring all " .. categoryName .. " items to you",
            Icon = "download",
            Callback = function()
                bringSpecificItems(items)
            end
        })
    end
    
    local DayFarmSection = AutoFarmTab:Section({
        Title = "Day Farm System",
    })
    
    DayFarmSection:Toggle({
        Title = "Day Farm Mode",
        Desc = "Create platform in the sky and activate Godmode",
        Flag = "DayFarm",
        Callback = function(state)
            toggleDayFarm(state)
        end
    })
    
    DayFarmSection:Button({
        Title = "Create Platform Manually",
        Desc = "Create the farming platform without activating the mode",
        Icon = "square",
        Callback = function()
            createDayFarmPlatform()
            showNotification("Day Farm", "Platform created in the sky", "square")
        end
    })
end

do
    local RescueTab = Window:Tab({
        Title = "Rescue",
        Icon = "heart",
    })
    
    local KidsSection = RescueTab:Section({
        Title = "Save Lost Children",
    })
    
    local lostChildren = {
        "Lost Child",
        "Lost Child2", 
        "Lost Child3",
        "Lost Child4"
    }
    
    for _, childName in ipairs(lostChildren) do
        KidsSection:Button({
            Title = "TP to " .. childName,
            Desc = "Teleport to " .. childName .. " location",
            Icon = "user",
            Callback = function()
                local closest, shortest = nil, math.huge
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name == childName and obj:IsA("Model") then
                        local cf = nil
                        if pcall(function() cf = obj:GetPivot() end) then
                            -- 
                        else
                            local part = obj:FindFirstChildWhichIsA("BasePart")
                            if part then cf = part.CFrame end
                        end
                        if cf then
                            local dist = (cf.Position - ignoreDistanceFrom).Magnitude
                            if dist >= minDistance and dist < shortest then
                                closest = obj
                                shortest = dist
                            end
                        end
                    end
                end
                if closest then
                    local cf = nil
                    if pcall(function() cf = closest:GetPivot() end) then
                        -- 
                    else
                        local part = closest:FindFirstChildWhichIsA("BasePart")
                        if part then cf = part.CFrame end
                    end
                    if cf then
                        LocalPlayer.Character:PivotTo(cf + Vector3.new(0, 5, 0))
                        showNotification("Rescue", "Teleported to " .. childName, "heart")
                    else
                        showNotification("Error", "Could not find valid position for " .. childName, "x")
                    end
                else
                    showNotification("Error", childName .. " not found in the map", "x")
                end
            end
        })
    end
    
    KidsSection:Button({
        Title = "Bring All Children to Me",
        Desc = "Teleport all lost children to your position",
        Icon = "users",
        Callback = function()
            local childrenFound = 0
            local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            
            if not hrp then
                showNotification("Error", "Character not found", "x")
                return
            end
            
            for _, childName in ipairs(lostChildren) do
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name == childName and obj:IsA("Model") then
                        local part = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                        if part then
                            pcall(function()
                                -- 
                                Replicated.RemoteEvents.RequestStartDraggingItem:FireServer(obj)
                                task.wait(0.05)
                                
                                if obj.PrimaryPart then
                                    obj:SetPrimaryPartCFrame(hrp.CFrame + Vector3.new(0, 3, childrenFound * 2, 0))
                                else
                                    part.CFrame = hrp.CFrame + Vector3.new(0, 3 + childrenFound * 2, 0)
                                end
                                
                                task.wait(0.05)
                                Replicated.RemoteEvents.StopDraggingItem:FireServer(obj)
                                childrenFound = childrenFound + 1
                            end)
                        end
                    end
                end
            end
            
            showNotification("Rescue", "Brought " .. childrenFound .. " children to your position", "users")
        end
    })
    
    local ChildrenInfoSection = RescueTab:Section({
        Title = "Children Information",
    })
    
    ChildrenInfoSection:Section({
        Title = [[There are 4 lost children in the forest that need to be rescued:
• Lost Child
• Lost Child2  
• Lost Child3
• Lost Child4

Use the teleport buttons to find them quickly and bring them to safety.]],
        TextSize = 16,
        TextTransparency = .35,
    })
    
    ChildrenInfoSection:Button({
        Title = "Auto Find Nearest Child",
        Desc = "Automatically teleport to the closest lost child",
        Icon = "search",
        Callback = function()
            local closestChild, shortestDistance = nil, math.huge
            local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            
            if not hrp then
                showNotification("Error", "Character not found", "x")
                return
            end
            
            for _, childName in ipairs(lostChildren) do
                for _, obj in pairs(workspace:GetDescendants()) do
                    if obj.Name == childName and obj:IsA("Model") then
                        local part = obj.PrimaryPart or obj:FindFirstChildWhichIsA("BasePart")
                        if part then
                            local distance = (part.Position - hrp.Position).Magnitude
                            if distance < shortestDistance then
                                shortestDistance = distance
                                closestChild = obj
                            end
                        end
                    end
                end
            end
            
            if closestChild then
                local cf = closestChild:GetPivot()
                LocalPlayer.Character:PivotTo(cf + Vector3.new(0, 5, 0))
                showNotification("Rescue", "Teleported to closest child (" .. math.floor(shortestDistance) .. " studs away)", "heart")
            else
                showNotification("Info", "No lost children found in the map", "info")
            end
        end
    })
end

do
    local TeleportTab = Window:Tab({
        Title = "Teleport",
        Icon = "map-pin",
    })
    
    -- Individual teleports
    for _, itemName in ipairs(teleportTargets) do
        if #itemName > 0 then
            TeleportTab:Button({
                Title = "TP to " .. itemName,
                Desc = "Teleport to " .. itemName,
                Callback = function()
                    local closest, shortest = nil, math.huge
                    for _, obj in pairs(workspace:GetDescendants()) do
                        if obj.Name == itemName and obj:IsA("Model") then
                            local cf = nil
                            if pcall(function() cf = obj:GetPivot() end) then
                                -- 
                            else
                                local part = obj:FindFirstChildWhichIsA("BasePart")
                                if part then cf = part.CFrame end
                            end
                            if cf then
                                local dist = (cf.Position - ignoreDistanceFrom).Magnitude
                                if dist >= minDistance and dist < shortest then
                                    closest = obj
                                    shortest = dist
                                end
                            end
                        end
                    end
                    if closest then
                        local cf = nil
                        if pcall(function() cf = closest:GetPivot() end) then
                            -- 
                        else
                            local part = closest:FindFirstChildWhichIsA("BasePart")
                            if part then cf = part.CFrame end
                        end
                        if cf then
                            LocalPlayer.Character:PivotTo(cf + Vector3.new(0, 5, 0))
                            showNotification("Teleported", "Moved to " .. itemName, "map-pin")
                        else
                            showNotification("Error", "Could not find valid position", "x")
                        end
                    else
                        showNotification("Error", itemName .. " not found", "x")
                    end
                end
            })
        end
    end
end

do
    local PlayerTab = Window:Tab({
        Title = "Player",
        Icon = "user",
    })
    
    local MovementSection = PlayerTab:Section({
        Title = "Movement",
    })
    
    -- 
    local currentWalkSpeed = 16
    MovementSection:Slider({
        Title = "WalkSpeed",
        Desc = "Set your movement speed",
        Flag = "WalkSpeed",
        Value = {
            Min = 16,
            Max = 200,
            Default = 16,
        },
        Callback = function(value)
            currentWalkSpeed = value
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                LocalPlayer.Character.Humanoid.WalkSpeed = currentWalkSpeed
            end
            showNotification("WalkSpeed", "Set to: " .. value, "activity")
        end
    })
    
    MovementSection:Slider({
        Title = "JumpPower",
        Desc = "Set your jump power",
        Flag = "JumpPower",
        Value = {
            Min = 50,
            Max = 200,
            Default = 50,
        },
        Callback = function(value)
            if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("Humanoid") then
                LocalPlayer.Character.Humanoid.JumpPower = value
            end
            showNotification("JumpPower", "Set to: " .. value, "arrow-up")
        end
    })
end

do
    local SettingsTab = Window:Tab({
        Title = "Settings",
        Icon = "settings",
    })
    
    local ConfigSection = SettingsTab:Section({
        Title = "Configuration",
    })
    
    ConfigSection:Keybind({
        Title = "Window toggle",
        Desc = "Keybind to toggle ui",
        Flag = "ToggleKey",
        Value = "X",
        Callback = function(key)
            Window:SetToggleKey(Enum.KeyCode[key])
            showNotification("Keybind Updated", "Toggle key set to: " .. key, "key")
        end,
    })
    
    local themes = {}
    for theme, _ in pairs(WindUI:GetThemes()) do
        table.insert(themes, theme)
    end
    table.sort(themes)
    
    ConfigSection:Dropdown({
        Title = "Theme Selector",
        Desc = "Change the UI theme",
        Flag = "Theme",
        Values = themes,
        Value = "Crimson",
        Callback = function(option)
            WindUI:SetTheme(option)
            showNotification("Theme Changed", "UI theme set to: " .. option, "palette")
        end,
    })
    
    ConfigSection:Button({
        Title = "Report Bug",
        Desc = "Submit a bug report to the developer",
        Icon = "alert-triangle",
        Callback = function()
            showNotification("Bug Reports", "Join our Discord server to report issues", "alert-triangle")
        end
    })
end

task.spawn(function()
    task.wait(1)
    for _, tab in pairs(Window.Tabs) do
        for _, section in pairs(tab.Sections) do
            if section.SetOpen then
                section:SetOpen(true)
            end
        end
    end
end)

workspace.DescendantAdded:Connect(function(desc)
    if espEnabled and table.find(teleportTargets, desc.Name) then
        task.wait(0.1)
        createESP(desc)
    end
    
    if table.find(AimbotTargets, desc.Name) and desc:IsA("Model") then
        task.wait(0.1)
        if npcESPEnabled then
            createNPCESP(desc)
        end
    end
end)

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if gameProcessed then return end
    if input.KeyCode == Enum.KeyCode.Q then
        toggleFly(not flying)
    end
end)

task.spawn(function()
    task.wait(0)
    
    pcall(function()
        if Window and AboutTab then
            if Window.ActiveTab then
                Window.ActiveTab = AboutTab
            end
            
            if AboutTab.Activate then
                AboutTab:Activate()
            elseif AboutTab.Select then
                AboutTab:Select()
            elseif AboutTab.Show then
                AboutTab:Show()
            end
        end
    end)
    
    pcall(function()
        local screenGui = game:GetService("CoreGui"):FindFirstChild("WindUI")
        if screenGui then
            local tabButtons = screenGui:GetDescendants()
            for _, button in ipairs(tabButtons) do
                if button:IsA("TextButton") and (button.Text == "Home" or button.Name == "HomeTab") then
                    if button.MouseButton1Click then
                        button.MouseButton1Click:Fire()
                    elseif button.Activated then
                        button.Activated:Fire()
                    end
                    break
                end
            end
        end
    end)
end)

showNotification("Snare99Nights Loaded", "Complete Script with All Features - Enjoy!", "check")
